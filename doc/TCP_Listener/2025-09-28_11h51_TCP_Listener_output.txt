2025-09-28 11h51 utc+1
Board: Raspbery Pi 4B-4GB
Python script: tcp_rx_v2.py

PuTTY SSH session into the RPi4B:

paulsk@RPi4B:~/tcp_listener $ python tcp_rx_v2.py
Listening for TCP connections...
PL2XLW global(): ip: 192.168.1.__, subnet: 255.255.255.0
PL2XLW global(): tcp_target(s): {'0': {'ip': '192.168.1.___', 'name': 'rpi4b', 'timeout': '1.0'}}

Pimoroni
Pico LiPo 2XL W
+ Lolin 2.13 ePD
Metar + MQTT + TCP Logger
global(): Preparing ePD...
global(): ePD prepared.
global(): PUBLISHER_ID = PL2XLW
global(): broker = 192.168.1.114
global(): port = 1883
global(): globals set.
setup(): [1609459234] Connected to __________________
setup(): IP-address: 192.168.1.__
setup(): WiFi MAC-address: __:__:__:__:__:__
setup(): Unix time: 1759056667
setup(): trying to mqtt.connect()
setup(): ‚úÖ mqtt.connect() successful
setup(): Creating FrameBuffer for red text...
setup(): Drawing intro screen...
setup(): Setup complete.
main(): Starting non-blocking METAR loop...
main(): MQTT message send interval: 1800 seconds
sync_time_fm_ntp(): ‚úÖ Time synced: 2025-09-28T10:51:37 UTC
main(): ISO 8601 time: 2025-09-28T11:51:37+01:00
ck_for_next_metar(): ‚ö†Ô∏è uxTime_rcvd is zero! Need to fetch METAR first!
main(): Time to fetch METAR!
fetchMetar(): start to send request
fetchMetar(): Raw response (first 30 char's): "{"status":true,"credits":967,""
fetchMetar(): wx observed (unix time): 1759055400 = 2025-09-28T10:30:00+00:00 UTC
fetchMetar(): my_status = True
fetchMetar(): my_credits = 967
fetchMetar(): wx observed = 1759055400
fetchMetar(): metar = "METAR LPPT 281030Z 32016G27KT 280V340 9999 BKN015 19/16 Q1014 WS R02"
fetchMetar(): metarDayAndHour: 281030 Z
fetchMetar(): metarHourNextStr = 281210
fetchMetar(): üïí Next METAR hour at: 12h10 local
main(): Time to publish MQTT message!
composePayload(): PUBLISHER_ID = PL2XLW
send_msg(): Topic length: 19
send_msg(): length written: 213
send_msg(): MQTT message ID: 1759056697
send_msg(): in IS8601 = 2025-09-28T10:51:37+00:00 UTC
send_msg(): msg = b''
        b'{"hd": {"de": "Ext", "sc": "meas", "vt": "s", "t": 1759055400, "dc": "wx", "ow": "PL2XLW"}, "acc": {"st": true, "cr": 967}, "metar": {"raw": "METAR LPPT 281030Z 32016G27KT 280V340 9999 BKN015 19/16 Q1014 WS R02"}}'
send_msg(): ‚úÖ MQTT message nr:   1 sent
-------------------------------------------------------
main(): Time to draw METAR on ePD!
drawMetarOnEPD(): Drawing METAR on EPD...
drawMetarOnEPD(): ‚úÖ METAR drawn on EPD.
main(): Waiting for next METAR update...
main(): üìç next_metar_unix_time = 1759057800 = 2025-09-28T12:10:00+01:00
